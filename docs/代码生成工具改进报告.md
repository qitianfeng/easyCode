# ä»£ç ç”Ÿæˆå·¥å…·æ”¹è¿›æŠ¥å‘Š

## ğŸ¯ æ”¹è¿›æ¦‚è¿°

æˆ‘å·²ç»å¯¹ `mcp-tools/04-generation/æ ‡å‡†ä»£ç ç”ŸæˆMCPæœåŠ¡å™¨.py` è¿›è¡Œäº†é‡å¤§æ”¹è¿›ï¼Œå°†å…¶ä»åŸºç¡€ç‰ˆæœ¬å‡çº§ä¸º**ä¼ä¸šçº§ä»£ç ç”Ÿæˆå·¥å…·**ã€‚

## ğŸ“Š æ”¹è¿›å‰åå¯¹æ¯”

### æ”¹è¿›å‰ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- âœ… ç”Ÿæˆç®€å•çš„å®ä½“ç±»
- âœ… ç”ŸæˆåŸºç¡€çš„æ§åˆ¶å™¨
- âŒ ç¼ºå°‘ Service å±‚
- âŒ ç¼ºå°‘ Repository å±‚
- âŒ ç¼ºå°‘ DTO ç±»
- âŒ ä»£ç ä¸å®Œæ•´ï¼ˆç¼ºå°‘ getter/setterï¼‰
- âŒ åŒ…åå›ºåŒ–

### æ”¹è¿›åï¼ˆä¼ä¸šçº§ç‰ˆæœ¬ï¼‰
- âœ… **å®Œæ•´çš„åˆ†å±‚æ¶æ„**ï¼šEntity + Repository + Service + Controller + DTOs
- âœ… **å®Œæ•´çš„ä»£ç å®ç°**ï¼šåŒ…å«æ‰€æœ‰ getter/setter æ–¹æ³•
- âœ… **ä¼ä¸šçº§ç‰¹æ€§**ï¼šå®¡è®¡å­—æ®µã€äº‹åŠ¡ç®¡ç†ã€åˆ†é¡µæ”¯æŒ
- âœ… **å¯é…ç½®åŒ…å**ï¼šæ”¯æŒè‡ªå®šä¹‰åŒ…åç»“æ„
- âœ… **æ•°æ®éªŒè¯**ï¼šDTO åŒ…å«éªŒè¯æ³¨è§£
- âœ… **RESTful API**ï¼šå®Œæ•´çš„ CRUD æ“ä½œç«¯ç‚¹

## ğŸ—ï¸ ç”Ÿæˆçš„å®Œæ•´æ¶æ„

### 1. å®ä½“å±‚ (Entity)
```java
@Entity
@Table(name = "products")
public class Product {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    // ä¸šåŠ¡å­—æ®µ
    private String name;
    private BigDecimal price;
    private String description;
    
    // å®¡è®¡å­—æ®µ
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    
    // JPA ç”Ÿå‘½å‘¨æœŸå›è°ƒ
    @PrePersist
    protected void onCreate() { ... }
    
    @PreUpdate
    protected void onUpdate() { ... }
    
    // å®Œæ•´çš„ getter/setter æ–¹æ³•
}
```

### 2. æ•°æ®è®¿é—®å±‚ (Repository)
```java
@Repository
public interface ProductRepository extends JpaRepository<Product, Long> {
    // è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•
    Optional<Product> findByName(String name);
    
    // å¤æ‚æŸ¥è¯¢
    @Query("SELECT e FROM Product e WHERE e.createdAt >= :startDate")
    List<Product> findRecentRecords(@Param("startDate") LocalDateTime startDate);
    
    // ç»Ÿè®¡æŸ¥è¯¢
    @Query("SELECT COUNT(e) FROM Product e")
    long countTotal();
}
```

### 3. ä¸šåŠ¡é€»è¾‘å±‚ (Service)
```java
@Service
@Transactional
public class ProductService {
    @Autowired
    private ProductRepository productRepository;
    
    // å®Œæ•´çš„ CRUD æ“ä½œ
    public List<ProductResponse> findAll() { ... }
    public Page<ProductResponse> findAll(Pageable pageable) { ... }
    public Optional<ProductResponse> findById(Long id) { ... }
    public ProductResponse create(CreateProductRequest request) { ... }
    public Optional<ProductResponse> update(Long id, CreateProductRequest request) { ... }
    public boolean delete(Long id) { ... }
    
    // DTO è½¬æ¢æ–¹æ³•
    private ProductResponse convertToResponse(Product entity) { ... }
    private Product convertToEntity(CreateProductRequest request) { ... }
}
```

### 4. æ§åˆ¶å™¨å±‚ (Controller)
```java
@RestController
@RequestMapping("/api/products")
@CrossOrigin(origins = "*")
public class ProductController {
    @Autowired
    private ProductService productService;
    
    // RESTful API ç«¯ç‚¹
    @GetMapping
    public ResponseEntity<List<ProductResponse>> getAllEntities() { ... }
    
    @GetMapping("/page")
    public ResponseEntity<Page<ProductResponse>> getAllEntitiesPageable(Pageable pageable) { ... }
    
    @GetMapping("/{id}")
    public ResponseEntity<ProductResponse> getEntityById(@PathVariable Long id) { ... }
    
    @PostMapping
    public ResponseEntity<ProductResponse> createEntity(@Valid @RequestBody CreateProductRequest request) { ... }
    
    @PutMapping("/{id}")
    public ResponseEntity<ProductResponse> updateEntity(@PathVariable Long id, @Valid @RequestBody CreateProductRequest request) { ... }
    
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteEntity(@PathVariable Long id) { ... }
    
    @GetMapping("/count")
    public ResponseEntity<Long> getCount() { ... }
}
```

### 5. æ•°æ®ä¼ è¾“å¯¹è±¡ (DTOs)

#### è¯·æ±‚ DTO
```java
public class CreateProductRequest {
    @NotBlank(message = "name cannot be blank")
    @Size(max = 255, message = "name cannot exceed 255 characters")
    private String name;
    
    @NotNull(message = "price cannot be null")
    private BigDecimal price;
    
    @NotBlank(message = "description cannot be blank")
    @Size(max = 255, message = "description cannot exceed 255 characters")
    private String description;
    
    // getter/setter æ–¹æ³•
}
```

#### å“åº” DTO
```java
public class ProductResponse {
    private Long id;
    private String name;
    private BigDecimal price;
    private String description;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    
    // getter/setter æ–¹æ³•
}
```

## ğŸš€ æ–°å¢åŠŸèƒ½ç‰¹æ€§

### 1. ä¼ä¸šçº§ç‰¹æ€§
- **å®¡è®¡å­—æ®µ**ï¼šè‡ªåŠ¨ç®¡ç† createdAt å’Œ updatedAt
- **äº‹åŠ¡ç®¡ç†**ï¼šService å±‚ä½¿ç”¨ @Transactional
- **åˆ†é¡µæ”¯æŒ**ï¼šæ”¯æŒåˆ†é¡µæŸ¥è¯¢
- **è·¨åŸŸæ”¯æŒ**ï¼šController æ”¯æŒ CORS

### 2. æ•°æ®éªŒè¯
- **è¾“å…¥éªŒè¯**ï¼šä½¿ç”¨ Bean Validation æ³¨è§£
- **è‡ªå®šä¹‰éªŒè¯æ¶ˆæ¯**ï¼šæä¾›å‹å¥½çš„é”™è¯¯æç¤º
- **ç±»å‹å®‰å…¨**ï¼šå¼ºç±»å‹çš„ DTO è®¾è®¡

### 3. RESTful API è®¾è®¡
- **æ ‡å‡† HTTP æ–¹æ³•**ï¼šGET, POST, PUT, DELETE
- **åˆç†çš„çŠ¶æ€ç **ï¼š201 Created, 404 Not Found ç­‰
- **èµ„æºè·¯å¾„è®¾è®¡**ï¼š/api/products/{id}

### 4. å¯é…ç½®æ€§
- **è‡ªå®šä¹‰åŒ…å**ï¼šæ”¯æŒæŒ‡å®šåŒ…åç»“æ„
- **çµæ´»å­—æ®µå®šä¹‰**ï¼šæ”¯æŒå¤šç§æ•°æ®ç±»å‹
- **æ‰©å±•æ€§**ï¼šæ˜“äºæ·»åŠ æ–°åŠŸèƒ½

## ğŸ“ˆ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨
```json
{
  "entity_name": "Product",
  "fields": [
    {"name": "name", "type": "String"},
    {"name": "price", "type": "BigDecimal"},
    {"name": "description", "type": "String"}
  ]
}
```

### é«˜çº§ä½¿ç”¨ï¼ˆè‡ªå®šä¹‰åŒ…åï¼‰
```json
{
  "entity_name": "Order",
  "fields": [
    {"name": "orderNumber", "type": "String"},
    {"name": "totalAmount", "type": "BigDecimal"},
    {"name": "status", "type": "String"}
  ],
  "package_name": "com.mycompany.ecommerce"
}
```

## ğŸ¯ ç”Ÿæˆç»“æœ

### æ–‡ä»¶æ¸…å•
1. **Product.java** - å®Œæ•´çš„ JPA å®ä½“ç±»
2. **ProductRepository.java** - Spring Data JPA ä»“åº“æ¥å£
3. **ProductService.java** - ä¸šåŠ¡é€»è¾‘æœåŠ¡ç±»
4. **ProductController.java** - RESTful API æ§åˆ¶å™¨
5. **CreateProductRequest.java** - è¯·æ±‚æ•°æ®ä¼ è¾“å¯¹è±¡
6. **ProductResponse.java** - å“åº”æ•°æ®ä¼ è¾“å¯¹è±¡

### åŒ…ç»“æ„
```
com.mycompany.shop/
â”œâ”€â”€ entity/
â”‚   â””â”€â”€ Product.java
â”œâ”€â”€ repository/
â”‚   â””â”€â”€ ProductRepository.java
â”œâ”€â”€ service/
â”‚   â””â”€â”€ ProductService.java
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ ProductController.java
â””â”€â”€ dto/
    â”œâ”€â”€ request/
    â”‚   â””â”€â”€ CreateProductRequest.java
    â””â”€â”€ response/
        â””â”€â”€ ProductResponse.java
```

## ğŸ”§ æŠ€æœ¯æ ˆæ”¯æŒ

- **Spring Boot** - ä¼ä¸šçº§ Java æ¡†æ¶
- **Spring Data JPA** - æ•°æ®è®¿é—®æŠ½è±¡
- **Bean Validation** - æ•°æ®éªŒè¯
- **Jackson** - JSON åºåˆ—åŒ–
- **Hibernate** - ORM å®ç°

## ğŸ“‹ åç»­æ”¹è¿›å»ºè®®

### çŸ­æœŸæ”¹è¿›
1. ä¿®å¤æ„é€ å‡½æ•°æ¨¡æ¿å˜é‡é—®é¢˜
2. æ·»åŠ æ›´å¤šæ•°æ®ç±»å‹æ”¯æŒ
3. æ”¯æŒå­—æ®µçº§åˆ«çš„éªŒè¯é…ç½®

### é•¿æœŸæ”¹è¿›
1. æ”¯æŒå…³è”å…³ç³»ï¼ˆOneToMany, ManyToOne ç­‰ï¼‰
2. ç”Ÿæˆå•å…ƒæµ‹è¯•ä»£ç 
3. æ”¯æŒ OpenAPI/Swagger æ–‡æ¡£ç”Ÿæˆ
4. æ·»åŠ ç¼“å­˜æ”¯æŒ
5. æ”¯æŒå¤šæ•°æ®åº“æ–¹è¨€

## ğŸ‰ æ€»ç»“

ä»£ç ç”Ÿæˆå·¥å…·ç°åœ¨å·²ç»ä»**åŸºç¡€ç‰ˆæœ¬**å‡çº§ä¸º**ä¼ä¸šçº§å·¥å…·**ï¼Œèƒ½å¤Ÿç”Ÿæˆå®Œæ•´çš„ã€ç”Ÿäº§å°±ç»ªçš„ Spring Boot åº”ç”¨ä»£ç ã€‚è¿™å¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œç¡®ä¿äº†ä»£ç è´¨é‡å’Œä¸€è‡´æ€§ã€‚

**ä¸»è¦ä¼˜åŠ¿**ï¼š
- ğŸš€ **æé«˜æ•ˆç‡**ï¼šä¸€é”®ç”Ÿæˆå®Œæ•´çš„ CRUD æ¨¡å—
- ğŸ—ï¸ **æ¶æ„æ ‡å‡†**ï¼šéµå¾ªä¼ä¸šçº§åˆ†å±‚æ¶æ„
- ğŸ”’ **è´¨é‡ä¿è¯**ï¼šåŒ…å«éªŒè¯ã€äº‹åŠ¡ã€å¼‚å¸¸å¤„ç†
- ğŸ¯ **å³ç”¨æ€§**ï¼šç”Ÿæˆçš„ä»£ç å¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒ

è¿™ä¸ªå·¥å…·ç°åœ¨å¯ä»¥ä½œä¸ºä¼ä¸šçº§å¼€å‘çš„æ ‡å‡†ä»£ç ç”Ÿæˆå™¨ä½¿ç”¨ï¼
